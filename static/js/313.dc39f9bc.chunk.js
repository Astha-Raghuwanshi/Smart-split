"use strict";(self.webpackChunkpomodoro=self.webpackChunkpomodoro||[]).push([[313],{7313:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var s=n(5043),r=n(6446),a=n(35),i=n(5316),l=n(6600),o=n(7392),d=n(1132),c=n(1430),h=n(3417),x=n(5865),m=n(5721),u=n(9336),g=n(681),j=n(8903),f=n(3336),A=n(7744),p=n(6441);const b=()=>{const[e,t]=s.useState(),[n,r]=s.useState(),{getPayments:a,txns:i}=(0,p.a)();return s.useEffect((()=>{const e=a(),n=e.getPayments();t(e.getTotal()),r(n)}),[a]),[e,n,i]};var w=n(5239),y=n.n(w);const v=()=>{const[e,t]=s.useState(),[n,r]=s.useState();return[e,s.useCallback((e=>(y()(e).then((e=>{const n=document.createElement("canvas"),s=n.getContext("2d"),r=e.width,a=e.height;n.width=r,n.height=a,s.drawImage(e,0,0);const i=n.toDataURL("image/png",1);return t(i),!0})).catch((e=>{r(e)})),!0)),[]),n]};var C=n(579);const S=(0,A.A)(f.A)((()=>({borderRadius:0,padding:"0.475rem",width:"24rem",maxWidth:"100%"}))),E=(0,A.A)(m.A)((()=>({"& > li":{paddingLeft:0,paddingRight:0,fontSize:"small"},marginBottom:"0.875rem"}))),k=s.memo((e=>{let{setImageUrl:t}=e;const n=s.useRef(null),[r,a]=v(),[i,l,o]=b(),{toPrice:d}=(0,p.a)();return s.useEffect((()=>{n.current&&null!==l&&void 0!==l&&l.length&&a(n.current)}),[a,l]),s.useEffect((()=>{r&&""!==r&&t(r)}),[r,t]),(0,C.jsxs)(S,{ref:n,children:[(0,C.jsx)(x.A,{borderBottom:1,fontWeight:"bold",borderColor:"text.disabled",children:"Expenses"}),(0,C.jsxs)(E,{dense:!0,children:[o.map((e=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(g.Ay,{children:(0,C.jsxs)(j.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)(x.A,{children:[e.friend.name," paid:"]}),e.reason&&(0,C.jsx)(x.A,{children:(0,C.jsxs)("small",{children:["(",e.reason,")"]})})]}),(0,C.jsx)("div",{children:d(e.amount)})]})},e.id),(0,C.jsx)(u.A,{})]}))),(0,C.jsxs)(x.A,{textAlign:"right",width:"100%",fontSize:"small",mt:"0.875rem",children:["Total: ",d(null!==i&&void 0!==i?i:0)]})]}),(0,C.jsx)(x.A,{borderBottom:1,fontWeight:"bold",borderColor:"text.disabled",children:"Final Txns"}),(0,C.jsx)(E,{dense:!0,children:l&&l.map((e=>(0,C.jsx)(g.Ay,{children:(0,C.jsxs)(j.Ay,{container:!0,justifyContent:"space-between",children:[(0,C.jsxs)("span",{children:[e.from_friend.name," owes"," ",e.to_friend.name,":"]})," ",d(e.amount)]})},e.id)))}),(0,C.jsx)(x.A,{textAlign:"center",marginTop:"0.875rem",fontSize:"small",children:(0,C.jsx)("sub",{})})]})}));var I=n(6925);const z={"& .MuiDialog-container":{alignItems:"flex-start"}},B=e=>{let{isOpen:t,closeModal:n}=e;const[x,m]=s.useState(),[u,g]=s.useState(!1);return(0,C.jsxs)(a.A,{open:t,onClose:n,sx:z,scroll:"paper",children:[(0,C.jsx)(l.A,{children:x&&(0,C.jsxs)(r.A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,C.jsx)(o.A,{onClick:e=>{e.preventDefault(),x&&(fetch(x).then((async t=>{try{const e=await t.blob(),n="final-txns-".concat((0,I.zE)(),".png");(0,I.Qv)(e,n),g(!1)}catch(e){return console.log(e),alert("Error occured while downloading image. Please refresh page and try again."),g(!1),!1}})),g(!0))},disabled:u,children:(0,C.jsx)(d.A,{})}),(0,C.jsx)(o.A,{disabled:!0,children:(0,C.jsx)(c.A,{})}),(0,C.jsx)(o.A,{disabled:!0,children:(0,C.jsx)(h.A,{})})]})}),(0,C.jsx)(i.A,{dividers:!0,children:(0,C.jsx)(r.A,{marginBottom:"12px",children:(0,C.jsx)(k,{setImageUrl:m})})})]})}}}]);
//# sourceMappingURL=313.dc39f9bc.chunk.js.map